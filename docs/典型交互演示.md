# 计算器典型交互演示

> 下列场景基于当前固件实现（方案 B、智能数字格式化）。屏幕区域：
> * L2 — 表达式行
> * L3 — 结果行
> * L1 / L0 — 历史区（最新在 L1）

---

## 场景 1：简单加法
| 用户动作 | 表达式行 (L2) | 结果行 (L3) | 历史区变化 |
|-----------|--------------|-------------|------------|
| 按 `1` | — | 1 | — |
| 按 `+` | 1+ | 0 | — |
| 按 `2` | 1+ | 2 | — |
| 按 `=` | 1+2=3 | 3 | - |
| 按 `2` | - | 2 | 新增 `1+2=3` |
| 按 `+` | 2+ | 0 | `1+2=3` |
| 按 `2` | 2+ | 2 | `1+2=3` |
| 按 `=` | 2+2=4 | 4 | `1+2=3` |

---

## 场景 2：连续运算（链式计算）
| 用户动作 | 表达式行 | 结果行 | 历史区变化 |
|-----------|---------|--------|------------|
| 见场景1结束状态 | 1+2 | 3 | L1: `1+2=3` |
| 按 `×` | 3× | 0 | — |
| 按 `4` | 3×4 | 4 | — |
| 按 `-` | 3×4- | 0 | —<br>**内部计算**：3×4=12 |
| 按 `5` | 3×4-5 | 5 | — |
| 按 `=` | 3×4-5 | 7 | 新增 `3×4-5=7` → L1:7, L0:3 |

---

## 场景 3：百分比运算
| 用户动作 | 表达式行 | 结果行 | 说明 |
|-----------|---------|--------|------|
| 按 `2` `0` | — / 20 | 20 | — |
| 按 `%` | — | 0.2 | 结果行除以 100 |

---

## 场景 4：小数输入与四舍五入
| 用户动作 | 表达式行 | 结果行 |
|-----------|---------|--------|
| 按 `0` `.` `6` `2` `5` | — / 0.625 | 0.625 |
| 按 `+` `0` `.` `0` `0` `1` | 0.625+0.001 | 0.001 |
| 按 `=` | 0.625+0.001 | 0.626 | 四舍五入到 3 位 |

---

## 场景 5：清除 (C) 与退格 (⌫)
| 用户动作 | 表达式行 | 结果行 |
|-----------|---------|--------|
| 按 `9` `8` `7` | — / 987 | 987 |
| 按 `⌫` | — / 98 | 98 | 删除一位 |
| 按 `C` | — | 0 | 全部清空 |

---

## 场景 6：错误示例（除以零）
| 用户动作 | 表达式行 | 结果行 | 历史区 |
|-----------|---------|--------|--------|
| 按 `5` `/` `0` | 5/0 | 0 | — |
| 按 `=` | 5/0 | **E** | 错误不写入历史 |
| 按 `C` | — | 0 | — |

> 若 UI 显示与上表不符，请检查对应逻辑。 